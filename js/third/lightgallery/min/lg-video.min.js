!function(e){"use strict";var o={videoMaxWidth:"855px",youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,videojs:!1},i=function(i){return this.core=e(i).data("lightGallery"),this.$el=e(i),this.core.s=e.extend({},o,this.core.s),this.videoLoaded=!1,this.init(),this};i.prototype.init=function(){var o=this;o.core.$el.on("hasVideo.lg.tm",function(e,i,l,a){if(o.core.$slide.eq(i).find(".lg-video").append(o.loadVideo(l,"lg-object",!0,i,a)),a)if(o.core.s.videojs)try{videojs(o.core.$slide.eq(i).find(".lg-html5").get(0),{},function(){o.videoLoaded||this.play()})}catch(s){console.error("Make sure you have included videojs")}else o.core.$slide.eq(i).find(".lg-html5").get(0).play()}),o.core.$el.on("onAferAppendSlide.lg.tm",function(e,i){o.core.$slide.eq(i).find(".lg-video-cont").css("max-width",o.core.s.videoMaxWidth),o.videoLoaded=!0});var i=function(e){if(e.find(".lg-object").hasClass("lg-has-poster"))if(e.hasClass("lg-has-video")){var i=e.find(".lg-youtube").get(0),l=e.find(".lg-vimeo").get(0),a=e.find(".lg-dailymotion").get(0),s=e.find(".lg-html5").get(0);if(i)i.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(l)try{$f(l).api("play")}catch(t){console.error("Make sure you have included froogaloop2 js")}else if(a)a.contentWindow.postMessage("play","*");else if(s)if(o.core.s.videojs)try{videojs(s).play()}catch(t){console.error("Make sure you have included videojs")}else s.play();e.addClass("lg-video-palying")}else{e.addClass("lg-video-palying lg-has-video");var d,r,n=function(i,l){if(e.find(".lg-video").append(o.loadVideo(i,"",!1,o.core.index,l)),l)if(o.core.s.videojs)try{videojs(o.core.$slide.eq(o.core.index).find(".lg-html5").get(0),{},function(){this.play()})}catch(a){console.error("Make sure you have included videojs")}else o.core.$slide.eq(o.core.index).find(".lg-html5").get(0).play()};o.core.s.dynamic?(d=o.core.s.dynamicEl[o.core.index].src,r=o.core.s.dynamicEl[o.core.index].html,n(d,r)):(d=o.core.$items.eq(o.core.index).attr("data-src"),r=o.core.$items.eq(o.core.index).attr("data-html"),n(d,r));var c=e.find(".lg-object");e.find(".lg-video").append(c),e.find(".lg-video-object").hasClass("lg-html5")||(e.removeClass("lg-complete"),e.find(".lg-video-object").on("load.lg error.lg",function(){e.addClass("lg-complete")}))}};o.core.doCss()?o.core.$el.on("onSlideClick.lg.tm",function(){var e=o.core.$slide.eq(o.core.index);i(e)}):o.core.$slide.on("click.lg",function(){i(e(this))}),o.core.$el.on("onBeforeSlide.lg.tm",function(e,i){var l=o.core.$slide.eq(i),a=l.find(".lg-youtube").get(0),s=l.find(".lg-vimeo").get(0),t=l.find(".lg-dailymotion").get(0),d=l.find(".lg-html5").get(0);if(a)a.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(s)try{$f(s).api("pause")}catch(r){console.error("Make sure you have included froogaloop2 js")}else if(t)t.contentWindow.postMessage("pause","*");else if(d)if(o.core.s.videojs)try{videojs(d).pause()}catch(r){console.error("Make sure you have included videojs")}else d.pause()}),o.core.$el.on("onAfterSlide.lg.tm",function(e,i){o.core.$slide.eq(i).removeClass("lg-video-palying")})},i.prototype.loadVideo=function(o,i,l,a,s){var t="",d=1,r="",n=this.core.isVideo(o,a)||{};if(l&&(d=this.videoLoaded?0:1),n.youtube)r="?wmode=opaque&autoplay="+d+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(r=r+"&"+e.param(this.core.s.youtubePlayerParams)),t='<iframe class="lg-video-object lg-youtube '+i+'" width="560" height="315" src="//www.youtube.com/embed/'+n.youtube[1]+r+'" frameborder="0" allowfullscreen></iframe>';else if(n.vimeo)r="?autoplay="+d+"&api=1",this.core.s.vimeoPlayerParams&&(r=r+"&"+e.param(this.core.s.vimeoPlayerParams)),t='<iframe class="lg-video-object lg-vimeo '+i+'" width="560" height="315"  src="http://player.vimeo.com/video/'+n.vimeo[1]+r+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(n.dailymotion)r="?wmode=opaque&autoplay="+d+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(r=r+"&"+e.param(this.core.s.dailymotionPlayerParams)),t='<iframe class="lg-video-object lg-dailymotion '+i+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+n.dailymotion[1]+r+'" frameborder="0" allowfullscreen></iframe>';else if(n.html5){var c=s.substring(0,1);("."===c||"#"===c)&&(s=e(s).html()),t=s}return t},i.prototype.destroy=function(){this.videoLoaded=!1},e.fn.lightGallery.modules.video=i}(jQuery,window,document);